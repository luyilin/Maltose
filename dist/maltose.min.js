"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}();!function(){var t=function(){function t(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var s={wrap:document.getElementsByClassName("maltose")[0],target:document.getElementsByTagName("textarea")[0],width:"100%",maxHeight:"200px",api:"https://luyilin.github.io/Maltose/demo/maltose.json"};for(var n in s)s.hasOwnProperty(n)&&!a.hasOwnProperty(n)&&(a[n]=s[n]);this.wrap=a.wrap,this.target=a.target;var o=new XMLHttpRequest;o.onreadystatechange=function(){4===o.readyState&&(o.status>=200&&o.status<300||304===o.status?(e.data=JSON.parse(o.responseText),e.init(a)):console.log("Request for emoticon resource was unsuccessful (｡•́︿•̀｡), the status code is "+o.status))},o.open("get",a.api),o.send(null)}return _createClass(t,[{key:"init",value:function(t){var e=this;if(document.querySelector(".maltose")){this.content=Object.keys(this.data),console.log(this.data,this.content);for(var a='<div class="maltose-logo"><span>(ฅ>ω<*ฅ)</span></div>\n                        <div class="maltose-main" style="width: '+t.width+';">',s=0;s<this.content.length;s++){a+='<ul class="maltose-ul maltose-ul-'+this.data[this.content[s]].type+'" style="max-height: '+(parseInt(t.maxHeight)-40+"px")+';">';for(var n=this.data[this.content[s]].container,o=0;o<n.length;o++){var l="颜文字"===this.content[s]||"emoji"===this.content[s],i="maltose-li "+(l?"":"maltose-img"),r=l?n[o].icon:'<img src="'+n[o].icon+'">';a+='<li class="'+i+('" title="'+n[o].text+'">'+r+"</li>")}a+="</ul>"}a+='<ul class="maltose-title">';for(var c=0;c<this.content.length;c++)a+='<li class="maltose-tab">'+this.content[c]+"</li>";a+='<li class="maltose-tab random-tab">random!</li>',a+="</ul></div>",this.wrap.innerHTML=a,document.addEventListener("click",function(t){t.target.classList.contains("maltose-logo")||t.target.parentNode&&t.target.parentNode.classList&&t.target.parentNode.classList.contains("maltose-logo")?(e.target.focus(),e.toggle()):"textarea"!==t.target.localName&&(e.target.blur(),e.wrap.classList.contains("maltose-show")&&e.wrap.classList.remove("maltose-show"))});var m=document.getElementsByClassName("maltose-main")[0];m.addEventListener("click",function(t){event.stopPropagation();var a=null;if(t.target.classList.contains("maltose-li")?a=t.target:t.target.parentNode.classList.contains("maltose-li")&&(a=t.target.parentNode),a){var s=a.classList.contains("maltose-img")?"![img]("+a.children[0].getAttribute("src")+")":a.innerHTML,n=e.target.selectionEnd,o=e.target.value;e.target.focus(),e.target.value=o.slice(0,n)+s+o.slice(n),e.toggle()}});for(var u=document.getElementsByClassName("maltose-title")[0],h=function(t){u.children[t].addEventListener("click",function(){e.changeTab(t)})},d=0;d<u.children.length;d++)h(d);this.changeTab(0),document.getElementsByClassName("random-tab")[0].addEventListener("click",function(){e.random()})}}},{key:"toggle",value:function(){var t=document.getElementsByClassName("maltose-show")[0];t?t.classList.remove("maltose-show"):this.wrap.classList.add("maltose-show")}},{key:"changeTab",value:function(t){if(!(t>4)){var e=document.getElementsByClassName("tab-show")[0];e&&e.classList.remove("tab-show"),document.getElementsByClassName("maltose-tab")[t].classList.add("tab-show");var a=document.getElementsByClassName("maltose-ul-show")[0];a&&a.classList.remove("maltose-ul-show"),document.getElementsByClassName("maltose-ul")[t].classList.add("maltose-ul-show")}}},{key:"random",value:function e(){var t=Math.floor(Math.random()*this.content.length),a=Math.floor(Math.random()*this.data[this.content[t]].container.length),s="颜文字"===this.content[t]||"emoji"===this.content[t],n=this.data[this.content[t]].container[a].icon,e=s?n:"![img]("+n+")",o=this.target.selectionEnd,l=this.target.value;this.target.value=l.slice(0,o)+e+l.slice(o),this.target.focus(),this.toggle()}}]),t}();"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=t:window.maltose=t}();
//# sourceMappingURL=maltose.min.js.map
