{"version":3,"sources":["maltose.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_typeof","Symbol","iterator","obj","constructor","prototype","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","maltose","option","_this","this","defaultConfig","wrap","document","getElementsByClassName","getElementsByTagName","width","maxHeight","api","hasOwnProperty","xhr","XMLHttpRequest","onreadystatechange","readyState","status","data","JSON","parse","responseText","init","console","log","open","send","value","_this2","content","keys","html","type","parseInt","li","container","text","icon","innerHTML","addEventListener","e","classList","contains","parentNode","focus","toggle","localName","blur","remove","main","j","event","stopPropagation","cursorEnd","selectionEnd","targetValue","slice","title","_loop","children","changeTab","v","_ret","ttab","random","add","tab","ulContent","Math","floor","module","exports","window"],"mappings":"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","file":"maltose.min.js","sourcesContent":["(() => {\n    class maltose {\n        constructor(option) {\n            const defaultConfig = {\n                wrap: document.getElementsByClassName('maltose')[0],\n                target: document.getElementsByTagName('textarea')[0],\n                width: '100%',\n                maxHeight: '200px',\n                api: '../demo/maltose.json'\n            };\n            for(let i in defaultConfig) {\n                if (defaultConfig.hasOwnProperty(i) && !option.hasOwnProperty(i)) {\n                    option[i] = defaultConfig[i]\n                }\n            }\n            this.wrap = option.wrap\n            this.target = option.target\n\n            const xhr = new XMLHttpRequest();\n            xhr.onreadystatechange = () => {\n                if (xhr.readyState === 4) {\n                    if (xhr.status >= 200 && xhr.status < 300 || xhr.status === 304) {\n                        this.data = JSON.parse(xhr.responseText)\n                        this.init(option)\n                    } else {\n                        console.log('Request for emoticon resource was unsuccessful (｡•́︿•̀｡), the status code is ' + xhr.status)\n                    }\n                }\n            }\n            xhr.open('get', option.api)\n            xhr.send(null)\n\n        }\n        init(option) {\n            this.content = Object.keys(this.data)\n            let html = `<div class=\"maltose-logo\"><span>•́ωก̀ 表情</span></div>\n                        <div class=\"maltose-main\" style=\"width: ${option.width};\">`\n            for(let i = 0; i < this.content.length; i++) {\n                html += `<ul class=\"maltose-ul maltose-ul-${this.data[this.content[i]].type}\" style=\"max-height: ${parseInt(option.maxHeight) - 40 +'px'};\">`\n                let li = this.data[this.content[i]].container\n                for(let i = 0; i < li.length; i++) {\n                    html += `<li class=\"maltose-li\" title=\"${li[i].text}\">${li[i].icon}</li>`\n                }\n                html += `</ul>`\n            }\n\n            html += `<ul class=\"maltose-title\">`\n            for(let i = 0; i < this.content.length; i++) {\n                html += `<li class=\"maltose-tab\">${this.content[i]}</li>`\n            }\n            html += `<li class=\"maltose-tab random-tab\">random!</li>`\n            html += `</ul></div>`\n\n            this.wrap.innerHTML = html\n\n            document.addEventListener('click', (e) => {\n                if (e.target.classList.contains('maltose-logo') || e.target.parentNode && e.target.parentNode.classList && e.target.parentNode.classList.contains('maltose-logo')) {\n                    this.target.focus()\n                    this.toggle()\n                }\n                else if (e.target.localName !== 'textarea') {\n                    this.target.blur()\n                    if (this.wrap.classList.contains('maltose-show')) {\n                        this.wrap.classList.remove('maltose-show')\n                    }\n                }\n            })\n\n            let main = document.getElementsByClassName('maltose-main')[0]\n            if (!main) return\n            main.addEventListener('click', (j) => {\n                event.stopPropagation()\n                let content = null\n                if (j.target.classList.contains('maltose-li')) {\n                    content = j.target\n                } else if (j.target.parentNode.classList.contains('maltose-li')) {\n                    content = j.target.parentNode\n                }\n                if (content) {\n                    let cursorEnd = this.target.selectionEnd;\n                    let targetValue = this.target.value;\n                    this.target.value = targetValue.slice(0, cursorEnd) + content.innerHTML + targetValue.slice(cursorEnd);\n                    this.target.focus()\n                    this.toggle()\n                }\n            })\n\n            let title = document.getElementsByClassName('maltose-title')[0];\n            for(let i = 0; i < title.children.length; i++) {\n                if (!title.children[i]) return\n                title.children[i].addEventListener('click', () => {\n                    this.changeTab(i)\n                })\n            }\n            this.changeTab(0)\n\n            let ttab = document.getElementsByClassName('random-tab')[0]\n            if (ttab) return\n            ttab.addEventListener('click', () => {\n                this.random()\n            })\n        }\n        toggle() {\n            let main = document.getElementsByClassName('maltose-show')[0]\n            if (main) {\n                main.classList.remove('maltose-show')\n            } else {\n                this.wrap.classList.add('maltose-show')\n            }\n        }\n        changeTab(i) {\n            if (i > 3) return\n            let tab = document.getElementsByClassName('tab-show')[0]\n            if (tab) {\n                tab.classList.remove('tab-show')\n            }\n            document.getElementsByClassName('maltose-tab')[i].classList.add('tab-show')\n            let ulContent = document.getElementsByClassName('maltose-ul-show')[0]\n            if (ulContent) {\n                ulContent.classList.remove('maltose-ul-show')\n            }\n            document.getElementsByClassName('maltose-ul')[i].classList.add('maltose-ul-show')\n        }\n        random() {\n            let i = Math.floor(Math.random() * this.content.length)\n            let j = Math.floor(Math.random() * this.data[this.content[i]].container.length)\n            let random = this.data[this.content[i]].container[j].icon\n            let cursorEnd = this.target.selectionEnd;\n            let targetValue = this.target.value;\n            this.target.value = targetValue.slice(0, cursorEnd) + random + targetValue.slice(cursorEnd);\n            this.target.focus()\n            this.toggle()\n        }\n    }\n\n    if (typeof module != \"undefined\" && typeof module.exports != \"undefined\"){\n        module.exports = maltose\n    }\n    else {\n        window.maltose = maltose\n    }\n})();\n"]}